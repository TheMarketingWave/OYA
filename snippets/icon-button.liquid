{% comment %}
  Icon Button Snippet
  Usage: {% render 'icon-button', icon: 'menu.svg' %}
  Usage: {% render 'icon-button', icon: 'menu.svg', size: 'large' %}
  Usage: {% render 'icon-button', icon: 'menu.svg', label: 'Click me', url: '/page' %}
  Usage: {% render 'icon-button', icon: 'menu.svg', label: 'Click me', variant: 'secondary' %}

  Parameters:
  - icon: The asset filename (e.g., 'menu.svg', 'close.svg')
  - size: Optional size modifier ('large', 'xlarge') - defaults to normal
  - label: Optional text label
  - url: Optional URL to make it a link instead of button
  - variant: Optional variant ('primary', 'secondary') - defaults to 'primary'
{% endcomment %}

{% liquid
  assign button_variant = variant | default: 'primary'
  assign button_class = 'icon-button icon-button--' | append: button_variant
%}

{% style %}
  .icon-button {
    background: none;
    border: none;
    padding: 0.5rem;
    cursor: pointer;
    transition: transform 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
    gap: 3px;
    position: relative;
    text-decoration: none;
  }

  /* Primary variant (default) */
  .icon-button--primary:before {
    content: '';
    position: absolute;
    bottom: 0px;
    left: 50%;
    transform: translateX(-50%);
    width: 6px;
    height: 6px;
    background-color: var(--color-brand-cream);
    border-radius: 50%;
    opacity: 0;
    transform: translateY(0px);
    transition: opacity 0.2s ease, transform 0.2s ease;
  }

  .icon-button--primary:hover:before {
    opacity: 1;
    transform: translateY(3px);
  }

  .icon-button--primary:active:before {
    opacity: 1;
    transform: translateY(8px);
  }

  .icon-button--primary p {
    color: var(--color-brand-cream);
    font-size: var(--font-size-small);
    margin: 0;
  }

  /* Secondary variant */
  .icon-button--secondary {
    background: var(--color-brand-green);
    padding: 12px 16px;
    border-radius: 8px;
  }

  .icon-button--secondary p {
    color: white;
    font-size: var(--font-size-small);
  }

  .icon-button--secondary:hover {
    background: var(--color-brand-cream);
    opacity: 0.9;
  }

  .icon-button img {
    width: 16px;
    height: 16px;
    display: block;
  }

  .icon-button--secondary img {
    filter: brightness(1);
  }
{% endstyle %}

{% if url %}
  <a
    href="{{ url }}"
    class="{{ button_class }}"
    aria-label="{{ icon | split: '.' | first | capitalize }} link"
  >
    {% if label %}
      <p>{{ label }}</p>
    {% endif %}
    <img src="{{ icon | asset_url }}" alt="{{ icon | split: '.' | first | capitalize }}" width="24" height="24">
  </a>
{% else %}
  <button
    class="{{ button_class }}"
    aria-label="{{ icon | split: '.' | first | capitalize }} button"
  >
    {% if label %}
      <p>{{ label }}</p>
    {% endif %}
    <img src="{{ icon | asset_url }}" alt="{{ icon | split: '.' | first | capitalize }}" width="24" height="24">
  </button>
{% endif %}
